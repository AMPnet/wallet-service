= AMPnet Wallet Service API Documentation
:toc: left
:sectnums:
:toclevels: 2
:source-highlighter: prettify
:docinfo: shared

== Wallet API
Collection of endpoints for managing wallets

=== User Wallet
Collection of endpoints for managing User wallet

==== Pair wallet

===== Generate code
.Request
include::{snippets}/WalletControllerTest/mustBeAbleToGeneratePairWalletCode/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustBeAbleToGeneratePairWalletCode/http-response.adoc[]

===== Get address for code
.Request
include::{snippets}/WalletControllerTest/mustReturnPairWalletCode/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustReturnPairWalletCode/http-response.adoc[]

==== Get wallet for active user
.Request
include::{snippets}/WalletControllerTest/mustBeAbleToGetOwnWallet/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustBeAbleToGetOwnWallet/http-response.adoc[]

==== Active user does not have a wallet
.Request
include::{snippets}/WalletControllerTest/mustReturnNotFoundForMissingWallet/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustReturnNotFoundForMissingWallet/http-response.adoc[]

==== Create Wallet

===== Create wallet for active user
.Request
include::{snippets}/WalletControllerTest/mustBeAbleToCreateWallet/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustBeAbleToCreateWallet/http-response.adoc[]

===== Active user cannot create additional wallet
.Request
include::{snippets}/WalletControllerTest/mustNotBeAbleToCreateAdditionalWallet/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustNotBeAbleToCreateAdditionalWallet/http-response.adoc[]

=== Organization Wallet
Collection of endpoints for managing Organization wallet

==== Get Organization wallet

===== Successfully get wallet
.Request
include::{snippets}/WalletControllerTest/mustBeAbleToGetOrganizationWallet/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustBeAbleToGetOrganizationWallet/http-response.adoc[]

===== Missing organization
.Request
include::{snippets}/WalletControllerTest/mustReturnNotFoundForMissingOrganizationWallet/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustReturnNotFoundForMissingOrganizationWallet/http-response.adoc[]

==== Get transaction for creating organization wallet
.Request
include::{snippets}/WalletControllerTest/mustBeAbleToGetCreateOrganizationWallet/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustBeAbleToGetCreateOrganizationWallet/http-response.adoc[]

=== Project Wallet
Collection of endpoints for managing Project wallet

==== Public - Get project wallet

===== Successfully get wallet
.Request
include::{snippets}/PublicWalletControllerTest/mustBeAbleToGetProjectWallet/http-request.adoc[]
.Response
include::{snippets}/PublicWalletControllerTest/mustBeAbleToGetProjectWallet/http-response.adoc[]

===== Missing project
.Request
include::{snippets}/PublicWalletControllerTest/mustReturnNotFoundForMissingProjectWallet/http-request.adoc[]
.Response
include::{snippets}/PublicWalletControllerTest/mustReturnNotFoundForMissingProjectWallet/http-response.adoc[]

===== Active projects
.Request
include::{snippets}/PublicWalletControllerTest/mustBeAbleToGetAllActiveProjectsWithWallet/http-request.adoc[]
.Response
include::{snippets}/PublicWalletControllerTest/mustBeAbleToGetAllActiveProjectsWithWallet/http-response.adoc[]

==== Generate transaction to create project wallet

===== Generate create project wallet transaction
.Request
include::{snippets}/WalletControllerTest/mustBeAbleToGetCreateProjectWalletTransaction/http-request.adoc[]
.Response
include::{snippets}/WalletControllerTest/mustBeAbleToGetCreateProjectWalletTransaction/http-response.adoc[]

=== Wallet Activation
Collection of endpoints for activating wallets by cooperative

==== Get unactivated wallets
Must have Admin role - privilege: `PrivilegeType.PRA_WALLET`

===== User wallets
.Request
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetUsersWithUnactivatedWallet/http-request.adoc[]
.Response
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetUsersWithUnactivatedWallet/http-response.adoc[]

===== Organization wallets
.Request
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetOrganizationsWithUnactivatedWallet/http-request.adoc[]
.Response
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetOrganizationsWithUnactivatedWallet/http-response.adoc[]

===== Project wallets
.Request
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetProjectsWithUnactivatedWallet/http-request.adoc[]
.Response
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetProjectsWithUnactivatedWallet/http-response.adoc[]

==== Generate wallet activation transaction
Must have Admin role - privilege: `PrivilegeType.PWA_WALLET`

.Request
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetActivateWalletTransaction/http-request.adoc[]
.Response
include::{snippets}/CooperativeWalletControllerTest/mustBeAbleToGetActivateWalletTransaction/http-response.adoc[]

== Broadcast API

=== Broadcast signed transaction
.Request
include::{snippets}/BroadcastTransactionControllerTest/mustBeAbleToCreateOrganizationWallet/http-request.adoc[]
.Response
include::{snippets}/BroadcastTransactionControllerTest/mustBeAbleToCreateOrganizationWallet/http-response.adoc[]

=== Broadcast non existing transaction
.Request
include::{snippets}/BroadcastTransactionControllerTest/mustNotBeAbleToPostNonExistingTransaction/http-request.adoc[]
.Response
include::{snippets}/BroadcastTransactionControllerTest/mustNotBeAbleToPostNonExistingTransaction/http-response.adoc[]

== Withdraw API

=== Create Withdraw
.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToCreateWithdraw/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToCreateWithdraw/http-response.adoc[]

=== Get my pending Withdraw
.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToGetPendingWithdraw/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToGetPendingWithdraw/http-response.adoc[]

=== Delete Withdraw
Must have Admin role - privilege: PWA_WITHDRAW. Cannot delete burned withdraw.

.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToDeleteWithdraw/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToDeleteWithdraw/http-response.adoc[]

=== Get Withdraws
Must have Admin role - privilege: PRA_WITHDRAW

==== Approved
.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToGetApprovedWithdraws/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToGetApprovedWithdraws/http-response.adoc[]

==== Burned
.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToGetBurnedWithdraws/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToGetBurnedWithdraws/http-response.adoc[]

=== Upload Document
Must have Admin role - privilege: PRA_WITHDRAW

.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToUploadDocument/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToUploadDocument/http-response.adoc[]

=== Generate Approve Withdraw transaction
.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToGenerateApprovalTransaction/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToGenerateApprovalTransaction/http-response.adoc[]

=== Generate Burn Withdraw transaction
Must have Admin role - privilege: PWA_WITHDRAW

.Request
include::{snippets}/WithdrawControllerTest/mustBeAbleToGenerateBurnTransaction/http-request.adoc[]
.Response
include::{snippets}/WithdrawControllerTest/mustBeAbleToGenerateBurnTransaction/http-response.adoc[]

== Deposit API

=== Create Deposit
.Request
include::{snippets}/DepositControllerTest/mustBeAbleToCreateDeposit/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToCreateDeposit/http-response.adoc[]

=== Get my pending Deposit
.Request
include::{snippets}/DepositControllerTest/mustBeAbleToGetPendingDeposit/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToGetPendingDeposit/http-response.adoc[]

=== Get Deposits
Must have Admin role - privilege: PRA_DEPOSIT

==== Search by reference
.Request
include::{snippets}/DepositControllerTest/mustBeAbleToSearchByReference/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToSearchByReference/http-response.adoc[]

==== Unapproved
.Request
include::{snippets}/DepositControllerTest/mustBeAbleToGetUnapprovedDeposits/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToGetUnapprovedDeposits/http-response.adoc[]

==== Approved
.Request
include::{snippets}/DepositControllerTest/mustBeAbleToGetApprovedDeposits/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToGetApprovedDeposits/http-response.adoc[]

=== Approve Deposit
Must have Admin role - privilege: PWA_DEPOSIT

.Request
include::{snippets}/DepositControllerTest/mustBeAbleToApproveDeposit/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToApproveDeposit/http-response.adoc[]

=== Delete Deposit
Must have Admin role - privilege: PWA_DEPOSIT. Cannot delete minted deposit.

.Request
include::{snippets}/DepositControllerTest/mustBeAbleToDeleteDeposit/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToDeleteDeposit/http-response.adoc[]

=== Generate Mint transaction
Must have Admin role - privilege: PWA_DEPOSIT

.Request
include::{snippets}/DepositControllerTest/mustBeAbleToGenerateMintTransaction/http-request.adoc[]
.Response
include::{snippets}/DepositControllerTest/mustBeAbleToGenerateMintTransaction/http-response.adoc[]

== Portfolio API

=== Get transactions with project
.Request
include::{snippets}/PortfolioControllerTest/mustBeAbleToGetMyPortfolio/http-request.adoc[]
.Response
include::{snippets}/PortfolioControllerTest/mustBeAbleToGetMyPortfolio/http-response.adoc[]

=== Get stats
.Request
include::{snippets}/PortfolioControllerTest/mustBeAbleToGetMyPortfolioStats/http-request.adoc[]
.Response
include::{snippets}/PortfolioControllerTest/mustBeAbleToGetMyPortfolioStats/http-response.adoc[]

=== Get investments in project
.Request
include::{snippets}/PortfolioControllerTest/mustBeAbleToGetInvestmentsInProject/http-request.adoc[]
.Response
include::{snippets}/PortfolioControllerTest/mustBeAbleToGetInvestmentsInProject/http-response.adoc[]

== Investment API

=== Generate transaction to invest in project
.Request
include::{snippets}/InvestmentControllerTest/mustBeAbleToGenerateProjectInvestmentTransaction/http-request.adoc[]
.Response
include::{snippets}/InvestmentControllerTest/mustBeAbleToGenerateProjectInvestmentTransaction/http-response.adoc[]

